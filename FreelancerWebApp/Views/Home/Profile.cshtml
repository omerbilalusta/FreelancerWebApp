@*@model FreelancerWebApp.Models.profile*@
@model IEnumerable<FreelancerWebApp.Models.job>
@{
    ViewData["Title"] = "Profile";
}
<style type="text/css">
    .customcontainer {
        padding: 30px;
        box-shadow: 0 2px 8px rgba(0,0,0, 0.1);
        border-radius: 30px;
        background-color: #ffffff
    }
</style>

<script>
    function showModal(id) {
        $('#' + id).modal('show');
    };

    function hideModal(id) {
        $('#' + id).modal('hide');
    };
</script>

<header @*class="bg-dark py-2"*@ style="background-color:#285238;">
    <section class="py-5 text-center container">
        <div class="row py-lg-5">
            <div class="col-lg-6 col-md-8 mx-auto " style="color:#ffbb33;">
                <h2 class="text-center fw-bolder py-3">Welcome To Your Profile </h2>
                <h3 class="text-light">@ViewBag.userName</h3>
            </div>
        </div>
    </section>
</header>


<div class="container-fluid">
    <div class="container">
        <div class="row gx-5">
            <div class=" col-lg-3 mb-5 mb-lg-0 py-5 my-5">
                <div class="">
                    <br /> 
                    <br />
                    <br />
                    <div class="card shadow-sm customcontainer bg-light">
                        <svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text></svg>

                        <div class="card-body my-3">
                            <p><strong>Name: </strong>@ViewBag.userName</p>
                            <p><strong>E-mail: </strong>@ViewBag.userEmail</p>
                        </div>
                    </div>
                    
                </div>
            </div>
            <div class=" col-lg-9 mb-5 mb-lg-0">
                @*<div>
                    <h4 class="text-center fw-bolder">Welcome To Your Profile @ViewBag.userid</h4>
                </div>*@
                <div class="album py-5 ">
                    <h3 class="text-center my-5">Jobs I posted</h3>
                    <div class="">
                        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                            @foreach (var item in Model)
                            {
                                if (item.Owner_ID == ViewBag.userid && item.Deliver_File_Path != "0" && item.Confirmed == false)
                                {
                                    <div class="col">
                                        <div class="card shadow-sm">
                                            @*<svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text></svg>*@

                                            <div class="card-body" style="color:#ffbb33; background-color:#285238;">
                                                <div style="min-height:200px; max-height:200px;">
                                                    <h5 class="text-light">@Html.DisplayFor(modelItem => item.Job_Title) ~ @Html.DisplayFor(modelItem => item.Job_Category)</h5>
                                                    <p class="card-text text-light ">@Html.DisplayFor(modelItem => item.Job_Description)</p>
                                                </div>

                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="btn-group">
                                                        @*<a class="btn btn-warning btn-sm" asp-controller="jobs" asp-action="Details" asp-route-id="@item.Id">View</a>*@
                                                        <button onclick="showModal(@item.Id)" type="button" class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="modalContent">View</button>
                                                    </div>
                                                    <small class="text-warning">Limit: @Html.DisplayFor(modelItem => item.Day) Day</small>
                                                    <div class="btn-group">
                                                        <a class="btn btn-primary btn-sm text-light" asp-controller="jobs" asp-action="Delivery" asp-route-id="@item.Id">Delivery</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                                else if (item.Owner_ID == ViewBag.userid && item.Deliver_File_Path == "0" && item.Confirmed == false)
                                {
                                    <div class="col">
                                        <div class="card shadow-sm">
                                            @*<svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text></svg>*@

                                            <div class="card-body" style="color:#ffbb33; background-color:#285238;">
                                                <div style="min-height:200px; max-height:200px;">
                                                    <h5 class="text-light">@Html.DisplayFor(modelItem => item.Job_Title) ~ @Html.DisplayFor(modelItem => item.Job_Category)</h5>
                                                    <p class="card-text text-light ">@Html.DisplayFor(modelItem => item.Job_Description)</p>
                                                </div>

                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="btn-group">
                                                        @*<a class="btn btn-warning btn-sm" asp-controller="jobs" asp-action="Details" asp-route-id="@item.Id">View</a>*@
                                                        <button onclick="showModal(@item.Id)" type="button" class="btn btn-warning btn-sm"  data-bs-toggle="modal" data-bs-target="modalContent">View</button>
                                                    </div>
                                                    <small class="text-warning">Limit: @Html.DisplayFor(modelItem => item.Day) Day</small>
                                                    <div class="btn-group">
                                                        <button class="btn btn-sm btn-success" type="button">Price: @Html.DisplayFor(modelItem => item.Offered_Price)$</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                        </div>
                    </div>
                    <h3 class="text-center my-5">Jobs I got</h3>
                    <div class="">
                        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                            @foreach (var item in Model)
                            {
                                if (item.Freelancer_ID == ViewBag.userid && item.Deliver_File_Path == "0" && item.Confirmed == false)
                                {
                                    <div class="col">
                                        <div class="card shadow-sm">
                                            @*<svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text></svg>*@

                                            <div class="card-body" style="color:#ffbb33; background-color:#285238;">
                                                <div style="min-height:200px; max-height:200px;">
                                                    <h5 class="text-light">@Html.DisplayFor(modelItem => item.Job_Title) ~ @Html.DisplayFor(modelItem => item.Job_Category)</h5>
                                                    <p class="card-text text-light ">@Html.DisplayFor(modelItem => item.Job_Description)</p>
                                                </div>

                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="btn-group">
                                                        @*<a class="btn btn-warning btn-sm" asp-controller="jobs" asp-action="Details" asp-route-id="@item.Id">View</a>*@
                                                        <button onclick="showModal(@item.Id)" type="button" class="btn btn-warning btn-sm"  data-bs-toggle="modal" data-bs-target="modalContent">View</button>
                                                    </div>
                                                    <small class="text-warning">Limit: @Html.DisplayFor(modelItem => item.Day) Day</small>
                                                    <!---->
                                                    <div class="btn-group">
                                                        <!--<button class="btn btn-sm btn-success" type="button"> Price: @Html.DisplayFor(modelItem => item.Offered_Price)$</button>-->
                                                        <a class="btn btn-primary btn-sm text-light" asp-controller="jobs" asp-action="Deliver" asp-route-id="@item.Id"> Deliver </a>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                        </div>
                    </div>
                    <h3 class="text-center my-5">Jobs I Delivered</h3>
                    <div class="">
                        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                            @foreach (var item in Model)
                            {
                                if (item.Freelancer_ID == ViewBag.userid && item.Deliver_File_Path != "0" && item.Confirmed == false)
                                {
                                    <div class="col">
                                        <div class="card shadow-sm">
                                            @*<svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text></svg>*@

                                            <div class="card-body" style="color:#ffbb33; background-color:#285238;">
                                                <div style="min-height:200px; max-height:200px;">
                                                    <h5 class="text-light">@Html.DisplayFor(modelItem => item.Job_Title) ~ @Html.DisplayFor(modelItem => item.Job_Category)</h5>
                                                    <p class="card-text text-light ">@Html.DisplayFor(modelItem => item.Job_Description)</p>
                                                </div>

                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="btn-group">
                                                        @*<a class="btn btn-warning btn-sm" asp-controller="jobs" asp-action="Details" asp-route-id="@item.Id">View</a>*@
                                                        <button onclick="showModal(@item.Id)" type="button" class="btn btn-warning btn-sm"  data-bs-toggle="modal" data-bs-target="modalContent">View</button>

                                                    </div>
                                                    <small class="text-warning">Limit: @Html.DisplayFor(modelItem => item.Day) Day</small>
                                                    <!---->
                                                    <div class="btn-group">
                                                        <!--<button class="btn btn-sm btn-success" type="button"> Price: @Html.DisplayFor(modelItem => item.Offered_Price)$</button>-->
                                                        <button class="btn btn-sm btn-primary" type="button" disabled> <a class="btn btn-sm btn-primary text-light" asp-controller="jobs" asp-action="Deliver" asp-route-id="@item.Id">Deliver </a></button>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                        </div>
                    </div>
                    <h3 class="text-center my-5">Completed Jobs</h3>
                    <div class="">
                        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                            @foreach (var item in Model)
                            {
                                if (item.Owner_ID == ViewBag.userid && item.Deliver_File_Path != "0" && item.Confirmed != false)
                                {
                                    <div class="col">
                                        <div class="card shadow-sm">
                                            @*<svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text></svg>*@

                                            <div class="card-body" style="color:#ffbb33; background-color:#285238;">
                                                <div style="min-height:200px; max-height:200px;">
                                                    <h5 class="text-light">@Html.DisplayFor(modelItem => item.Job_Title) ~ @Html.DisplayFor(modelItem => item.Job_Category)</h5>
                                                    <p class="card-text text-light ">@Html.DisplayFor(modelItem => item.Job_Description)</p>
                                                </div>

                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="btn-group">
                                                        @*<a class="btn btn-warning btn-sm" asp-controller="jobs" asp-action="Details" asp-route-id="@item.Id">View</a>*@
                                                        <button onclick="showModal(@item.Id)" type="button" class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="modalContent">View</button>

                                                    </div>
                                                    <small class="text-warning">Limit: @Html.DisplayFor(modelItem => item.Day) Day</small>
                                                    <!---->
                                                    <div class="btn-group">
                                                        <!--<button class="btn btn-sm btn-success" type="button"> Price: @Html.DisplayFor(modelItem => item.Offered_Price)$</button>-->
                                                        <button class="btn btn-sm btn-primary" type="button" disabled> <a class="btn btn-sm btn-primary text-light" asp-controller="jobs" asp-action="Deliver" asp-route-id="@item.Id">Completed</a></button>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                                else if (item.Freelancer_ID == ViewBag.userid && item.Deliver_File_Path != "0" && item.Confirmed != false)
                                {
                                    <div class="col">
                                        <div class="card shadow-sm">
                                            @*<svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%" fill="#eceeef" dy=".3em">Thumbnail</text></svg>*@

                                            <div class="card-body" style="color:#ffbb33; background-color:#285238;">
                                                <div style="min-height:200px; max-height:200px;">
                                                    <h5 class="text-light">@Html.DisplayFor(modelItem => item.Job_Title) ~ @Html.DisplayFor(modelItem => item.Job_Category)</h5>
                                                    <p class="card-text text-light ">@Html.DisplayFor(modelItem => item.Job_Description)</p>
                                                </div>

                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="btn-group">
                                                        @*<a class="btn btn-warning btn-sm" asp-controller="jobs" asp-action="Details" asp-route-id="@item.Id">View</a>*@
                                                        <button onclick="showModal(@item.Id)" type="button" class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="modalContent">View</button>

                                                    </div>
                                                    <small class="text-warning">Limit: @Html.DisplayFor(modelItem => item.Day) Day</small>
                                                    <!---->
                                                    <div class="btn-group">
                                                        <!--<button class="btn btn-sm btn-success" type="button"> Price: @Html.DisplayFor(modelItem => item.Offered_Price)$</button>-->
                                                        <button class="btn btn-sm btn-primary" type="button" disabled> <a class="btn btn-sm btn-primary text-light" asp-controller="jobs" asp-action="Deliver" asp-route-id="@item.Id">Completed</a></button>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                        </div>
                    </div>
                </div>
            </div>
            <div class=" col-lg-0 mb-5 mb-lg-0 py-5 my-5"></div>
        </div>
    </div>
</div>

@foreach (var item in Model)
{
    <div id="@item.Id" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Job Details</h5>
                </div>
                <div class="modal-body">
                    <h4>Title: @item.Job_Title</h4>
                    <h6>Category: @item.Job_Category</h6>
                    <p class="my-3">@item.Job_Description</p>
                    <br />
                    <br />

                    <p>Award will be <strong class="text-success">@item.Offered_Price$</strong></p>
                    <p>Complete in <strong class="text-danger">@item.Day</strong> days</p>
                    <br />
                    <br />
                    <div class="row">
                        <div class="col-3">
                            <h6>Created By:</h6>
                        </div>
                        <div class="col-3">
                            <p>@item.Owner_ID</p>
                        </div>
                        <div class="col-6"></div>
                    </div>
                    <div class="row">
                        <div class="col-3">
                            <h6>Published at: </h6>
                        </div>
                        <div class="col-3">
                            @if (@item.Publish_Date.ToString().Length < 20)
                            {
                                @item.Publish_Date.ToString().Substring(0,10)
                                ;
                            }
                            else
                            {
                                @item.Publish_Date.ToString()
                                ;
                                <text>Failure</text>
                            }
                        </div>
                        <div class="col-6"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal" id="modalContent" onclick="hideModal(@item.Id)" aria-label=" Close">Kapat</button>
                </div>
            </div>
        </div>
    </div>
}